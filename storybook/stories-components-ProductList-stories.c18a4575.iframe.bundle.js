"use strict";(self.webpackChunkreact_shopping_cart=self.webpackChunkreact_shopping_cart||[]).push([[82],{"./src/stories/components/ProductList.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:function(){return Default},__namedExportsOrder:function(){return __namedExportsOrder}});var _Default$parameters,_Default$parameters2,_Default$parameters2$,_home_runner_work_react_shopping_cart_react_shopping_cart_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),_components_main_ProductList__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/main/ProductList.tsx"),_mocks_handlers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/mocks/handlers.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js"),meta={title:"ShoppingCart/product/ProductList",component:_components_main_ProductList__WEBPACK_IMPORTED_MODULE_0__.Z,tags:["autodocs"],parameters:{msw:_mocks_handlers__WEBPACK_IMPORTED_MODULE_1__.q},decorators:[function(Story){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Story,{})}]};__webpack_exports__.default=meta;var Default={};Default.parameters=(0,_home_runner_work_react_shopping_cart_react_shopping_cart_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)((0,_home_runner_work_react_shopping_cart_react_shopping_cart_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({},Default.parameters),{},{docs:(0,_home_runner_work_react_shopping_cart_react_shopping_cart_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)((0,_home_runner_work_react_shopping_cart_react_shopping_cart_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({},null===(_Default$parameters=Default.parameters)||void 0===_Default$parameters?void 0:_Default$parameters.docs),{},{source:(0,_home_runner_work_react_shopping_cart_react_shopping_cart_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_3__.Z)({originalSource:"{}"},null===(_Default$parameters2=Default.parameters)||void 0===_Default$parameters2||null===(_Default$parameters2$=_Default$parameters2.docs)||void 0===_Default$parameters2$?void 0:_Default$parameters2$.source)})});var __namedExportsOrder=["Default"]},"./src/components/main/ProductList.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _templateObject,_home_runner_work_react_shopping_cart_react_shopping_cart_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),_home_runner_work_react_shopping_cart_react_shopping_cart_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),recoil__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/recoil/es/index.js"),styled_components__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),_ProductItem__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/main/ProductItem.tsx"),_hooks_useFetchData__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/hooks/useFetchData.ts"),_constants_url__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/constants/url.ts"),_store_ProductListState__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/store/ProductListState.ts"),react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/jsx-runtime.js"),S={Wrapper:styled_components__WEBPACK_IMPORTED_MODULE_8__.zo.div(_templateObject||(_templateObject=(0,_home_runner_work_react_shopping_cart_react_shopping_cart_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral_js__WEBPACK_IMPORTED_MODULE_9__.Z)(["\n    display: grid;\n    grid-template-columns: repeat(4, 1fr);\n    grid-template-rows: repeat(3, 1fr);\n    gap: 86px 4%;\n    max-width: 1270px;\n    margin: 0 auto;\n    padding: 0 20px 120px;\n\n    @media all and (min-width: 768px) and (max-width: 1023px) {\n      grid-template-columns: repeat(3, 1fr);\n    }\n\n    @media all and (min-width: 480px) and (max-width: 767px) {\n      grid-template-columns: repeat(2, 1fr);\n    }\n\n    @media all and (max-width: 479px) {\n      grid-template-columns: repeat(1, 1fr);\n    }\n  "])))};__webpack_exports__.Z=function ProductList(){var _useRecoilState=(0,recoil__WEBPACK_IMPORTED_MODULE_0__.FV)(_store_ProductListState__WEBPACK_IMPORTED_MODULE_3__.v),_useRecoilState2=(0,_home_runner_work_react_shopping_cart_react_shopping_cart_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_6__.Z)(_useRecoilState,2),productList=_useRecoilState2[0],setProductList=_useRecoilState2[1],_useFetchData=(0,_hooks_useFetchData__WEBPACK_IMPORTED_MODULE_2__.$)(setProductList),api=_useFetchData.api,isLoading=_useFetchData.isLoading;return(0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)((function(){api.get(_constants_url__WEBPACK_IMPORTED_MODULE_7__.l)}),[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(S.Wrapper,{children:isLoading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("p",{children:"Loading.."}):productList.map((function(product){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_ProductItem__WEBPACK_IMPORTED_MODULE_1__.Z,{id:product.id,name:product.name,price:product.price,imgUrl:"".concat(".").concat(product.imageUrl)},product.id)}))})}},"./src/mocks/handlers.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{q:function(){return handlers}});var regeneratorRuntime=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js"),toConsumableArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),lib=__webpack_require__("./node_modules/msw/lib/index.js"),localStorage=__webpack_require__("./src/utils/localStorage.ts"),products=((0,localStorage.$)("cart",[]),[{id:1,name:"PET보틀-정사각(420ml)",price:43400,imageUrl:"/assets/product1.svg"},{id:2,name:"PET보틀-밀크티(370ml)",price:73400,imageUrl:"/assets/product2.svg"},{id:3,name:"PET보틀-정사각(370ml)",price:41e3,imageUrl:"/assets/product3.svg"},{id:4,name:"PET보틀-납작(450ml)",price:39900,imageUrl:"/assets/product4.svg"},{id:5,name:"PET보틀-단지(480ml)",price:39900,imageUrl:"/assets/product5.svg"},{id:6,name:"PET보틀-납작(260ml)",price:41e3,imageUrl:"/assets/product6.svg"},{id:7,name:"PET보틀-원형(500ml)",price:61800,imageUrl:"/assets/product7.svg"},{id:8,name:"PET보틀-원형(500ml)",price:30500,imageUrl:"/assets/product8.svg"},{id:9,name:"PET보틀-길쭉(500ml)",price:5e4,imageUrl:"/assets/product1.svg"},{id:10,name:"PET보틀-원형(500ml)",price:44500,imageUrl:"/assets/product2.svg"},{id:11,name:"PET보틀-딥다크(500ml)",price:18e3,imageUrl:"/assets/product3.svg"},{id:12,name:"PET보틀-힙 플라스크(500ml)",price:21500,imageUrl:"/assets/product4.svg"}]),url=__webpack_require__("./src/constants/url.ts"),constants=__webpack_require__("./src/constants/index.ts"),getCart=function getCart(){return(0,localStorage.$)("cart",[])},setCart=function setCart(updatedCart){return(0,localStorage.f)("cart",updatedCart)},getProduct=function getProduct(id){return products.find((function(item){return item.id===id}))},handlers=[lib.rest.get(url.l,(function(req,res,ctx){return res(ctx.delay(1e3),ctx.status(200),ctx.json(products))})),lib.rest.get(url.a,(function(req,res,ctx){return res(ctx.delay(1e3),ctx.status(200),ctx.json(getCart()))})),lib.rest.post(url.a,function(){var _ref=(0,asyncToGenerator.Z)((0,regeneratorRuntime.Z)().mark((function _callee(req,res,ctx){var _yield$req$json,id,updatedItem,updatedCart;return(0,regeneratorRuntime.Z)().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,req.json();case 2:if(_yield$req$json=_context.sent,id=_yield$req$json.id,void 0!==getProduct(id)){_context.next=6;break}return _context.abrupt("return",res(ctx.status(404)));case 6:return updatedItem={id:id,quantity:1,product:getProduct(id)},updatedCart=[].concat((0,toConsumableArray.Z)(getCart()),[updatedItem]),setCart(updatedCart),_context.abrupt("return",res(ctx.status(201),ctx.json(updatedItem)));case 10:case"end":return _context.stop()}}),_callee)})));return function(_x,_x2,_x3){return _ref.apply(this,arguments)}}()),lib.rest.patch("".concat(url.a,"/:id"),function(){var _ref2=(0,asyncToGenerator.Z)((0,regeneratorRuntime.Z)().mark((function _callee2(req,res,ctx){var _yield$req$json2,id,quantity,cartItemIndex,updatedItem,updatedCart,item;return(0,regeneratorRuntime.Z)().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,req.json();case 2:if(_yield$req$json2=_context2.sent,id=_yield$req$json2.id,quantity=_yield$req$json2.quantity,cartItemIndex=getCart().findIndex((function(item){return item.id===id})),-1!==cartItemIndex){_context2.next=8;break}return _context2.abrupt("return",res(ctx.status(404)));case 8:return updatedItem={id:id,quantity:quantity,product:getProduct(id)},updatedCart=cartItemIndex>=constants.jB?getCart().map((function(item,index){return index===cartItemIndex?updatedItem:item})):[].concat((0,toConsumableArray.Z)(getCart()),[updatedItem]),setCart(updatedCart),item={id:id,quantity:quantity},_context2.abrupt("return",res(ctx.status(200),ctx.json(item)));case 13:case"end":return _context2.stop()}}),_callee2)})));return function(_x4,_x5,_x6){return _ref2.apply(this,arguments)}}()),lib.rest.delete("".concat(url.a,"/:id"),function(){var _ref3=(0,asyncToGenerator.Z)((0,regeneratorRuntime.Z)().mark((function _callee3(req,res,ctx){var _yield$req$json3,id,updatedCart;return(0,regeneratorRuntime.Z)().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,req.json();case 2:if(_yield$req$json3=_context3.sent,id=_yield$req$json3.id,void 0!==(updatedCart=getCart().filter((function(item){return item.id!==id})))){_context3.next=7;break}return _context3.abrupt("return",res(ctx.status(404)));case 7:return setCart(updatedCart),_context3.abrupt("return",res(ctx.status(204)));case 9:case"end":return _context3.stop()}}),_callee3)})));return function(_x7,_x8,_x9){return _ref3.apply(this,arguments)}}())]}}]);